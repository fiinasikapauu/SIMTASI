<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>Sistem Approval Dosen Pembimbing</title>
    <link rel="stylesheet" href="/stylesheets/output.css" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>
  <body class="bg-gray-100">
    <!-- Header -->
    <header class="bg-green-600 text-white p-4">
      <div class="container mx-auto flex justify-between items-center">
        <div>
          <h1 class="text-3xl font-bold">SIMTASI</h1>
        </div>
        <div>
          <button
            class="text-white bg-green-700 px-4 py-2 rounded-full hover:bg-green-800"
          >
            <span
              style="
                background-image: url('../images/user_icon.png');
                background-size: cover;
                background-position: center;
                width: 24px;
                height: 24px;
                display: inline-block;
              "
            ></span>
          </button>
        </div>
      </div>
    </header>
    </div>

    <!-- Main Content -->
    <div class="container mx-auto p-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Sidebar -->
        <%- include('../sidebar/sidebardosen.ejs') %>

            <!-- Main Content Area -->
            <div class="col-span-2 bg-white p-6 rounded-lg shadow-lg    ">
                <h2 class="text-2xl font-semibold text-green-600 mb-6">Sistem Approval Dosen Pembimbing</h2>

                <div class="border-collapse overflow-x-auto bg-white rounded-lg shadow-lg">
                    <table class="border-b min-w-full table-auto w-full text-lg">
                        <thead>
                            <tr class="border-b border-collapse bg-green-600 text-white border-2">
                                <th class="border-r border-collapse px-6 py-4 text-center">No</th>
                                <th class="border-r border-collapse px-6 py-4 text-center">Nama</th>
                                <th class="border-r border-collapse px-6 py-4 text-center">Topik TA</th>
                                <th class="border-r border-collapse px-6 py-4 text-center">Judul TA</th>
                                <th class="border-r border-collapse px-6 py-4 text-center">Tanggal Pengajuan</th>
                                <th class="border-r border-collapse px-6 py-4 text-center">Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% mahasiswaList.forEach((mahasiswa, index) => { %>
                            <tr class="border-r border-collapse bg-gray-100 border-b border-gray-600">
                                <td class="border-r border-collapse px-6 py-4 text-center"><%= index + 1 %></td>
                                <td class="border-r border-collapse px-6 py-4"><%= mahasiswa.user.nama %></td>
                                <td class="border-r border-collapse px-6 py-4"><%= mahasiswa.topikta.topik %></td>
                                <td class="border-r border-collapse px-6 py-4 text-center"><%= mahasiswa.judul_ta %></td>
                                <td class="border-r border-collapse px-6 py-4 text-center"><%= mahasiswa.tanggal_daftar %></td>
                                <td class="border-r border-collapse px-6 py-4 text-center p-4 mr-4">
                                    <div class="flex flex-warp">
                                        <button class="mr-4 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 approvalBtn" data-id="<%= mahasiswa.id_pendaftaran %>" data-status="Setuju">
                                        Setuju
                                    </button>
                                    <button class="ml-4 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 approvalBtn" data-id="<%= mahasiswa.id_pendaftaran %>" data-status="Tidak Setuju">
                                         Tidak Setuju
                                    </button>
                                    </div>
                                </td>
                            </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer class="bg-green-600 text-white text-center p-4 mt-6">
      <p>&copy; 2025 Sistem Informasi - Fakultas Teknologi Informasi</p>
    </footer>
    <!-- Check if the success parameter is passed in the URL -->
    <script src="/javascripts/alert-approval.js"></script>
  </body>
</html>
